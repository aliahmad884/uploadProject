name: Deploy Next.js App to Krystal Hosting

on:
  push:
    branches:
      - main

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
    - name: Check if next.zip exists on the server
      run: ls -al deployment/

      
    - name: Check root Dir on the server
      run: ls -al deployment/..

      
    - name: UnZip .next directory
      run: unzip -o deployment/next.zip
          
    # Step 5: Retry logic for failed uploads
    - name: Retry failed uploads
      run: |
        echo "Implement retry logic here if needed. You can use a different tool or script to handle retries."

    # Step 6: Notify on failure
    - name: Notify on failure
      if: failure()
      run: |
        echo "Deployment failed. Please check the logs for details."
        # You can add additional notification steps here (e.g., send an email or Slack message).
